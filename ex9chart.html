<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ‘»</title>
    <script
      type="text/javascript"
      src="https://www.gstatic.com/charts/loader.js"
    ></script>
    <script src="https://unpkg.com/vue@3"></script>
    <script>
      let datas = [
        ["ì¼ë³¸", 3],
        ["ëŒ€ë§Œ", 7],
        ["ëª½ê³¨", 3],
        ["í˜ë£¨", 4],
        ["ë¯¸êµ­", 3],
      ];

      function drawFunc() {
        let data = google.visualization.arrayToDataTable([
          ["ì—¬í–‰", "ì›í•˜ëŠ” ì •ë„"],
          ...datas,
        ]);
        let options = { title: "ê°€ê³  ì‹¶ì€ ì—¬í–‰ì§€", is3D: true };
        let chart = new google.visualization.PieChart(
          document.querySelector("#chart_div")
        );
        chart.draw(data, options);
      }

      google.charts.load("current", { packages: ["corechart"] });
      google.charts.setOnLoadCallback(drawFunc);

      window.updateChart = function () {
        drawFunc();
      };
    </script>
  </head>
  <body>
    <h2>êµ¬ê¸€ ì°¨íŠ¸(ì› ê·¸ë˜í”„)ê·¸ë¦¬ê¸°</h2>
    ì—¬í–‰ì§€ ì„ íƒ<br />
    <div id="chart_div" style="height: 500px"></div>
    <div id="app">
      <ul>
        <li v-for="(value, index) in dataArray" :key="index">
          {{ value[0] }}: {{ value[1] }}
          <button @click="addOneFunc(index)">+ 1</button>
          <button @click="subOneFunc(index)">- 1</button>
        </li>
      </ul>
    </div>
    <script>
      const { createApp } = Vue;
      createApp({
        data() {
          return {
            dataArray: datas,
          };
        },
        methods: {
          addOneFunc(index) {
            this.dataArray[index][1]++;
            this.updateChart();
          },
          subOneFunc(index) {
            if (this.dataArray[index][1] > 0) {
              this.dataArray[index][1]--;
              this.updateChart();
            }
          },
          updateChart() {
            drawFunc();
            //window.updateChart();
          },
        },
      }).mount("#app");
    </script>
  </body>
</html>
